<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.js"></script>
<body>

<script type="text/babel">

    var MyContainer = React.createClass({
        getInitialState: function() {
            return { checked: false, totalChecked: 0 };
        },
        onChildChanged: function(newState) {
            // if newState is true, it means a checkbox has been checked.
            var newTotal = this.state.totalChecked + (newState ? 1 : -1);
            this.setState({ totalChecked: newTotal });
        },
        render: function() {
            return  <div>
                <div>How many are checked ? {this.state.totalChecked}</div>
                <ToggleButton text="Toggle me" initialChecked={this.state.checked} callbackParent={this.onChildChanged} />
                <ToggleButton text="Toggle me too" initialChecked={this.state.checked} callbackParent={this.onChildChanged} />
                <ToggleButton text="And me" initialChecked={this.state.checked} callbackParent={this.onChildChanged} />
            </div>;
        }
    });

    var ToggleButton = React.createClass({
        getInitialState: function() {
            return { checked: this.props.initialChecked };
        },
        onTextChanged: function() {
            var newState = !this.state.checked;
            this.setState({ checked: newState });
            this.props.callbackParent(newState); // hey parent, I've changed!
        },
        render: function() {
            return <label>{this.props.text}: <input type="checkbox" checked={this.state.checked} onChange={this.onTextChanged}/></label>;
        }
    });
    React.render(<MyContainer />, document.body);
</script>
</body>
</html>